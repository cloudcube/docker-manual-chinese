
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="google-site-verification" content="UxV66EKuPe87dgnH1sbrldrx6VsoWMrx5NjwkgUFxXI" />

    <title>Running a Node.js app on CentOS - Docker Documentation</title>

    <meta name="description" content="Installing and running a Node.js app on CentOS" />
    <meta name="keywords" content="docker, example, package installation, node, centos" />

    <script type="text/javascript">
        // This is probably used by the search engine
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '',
            HAS_SOURCE:  true
        };
    </script>
    <link rel="stylesheet" href="../../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap-responsive.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/docs.js"></script>

</head>

<body>

<div class="navbar navbar-fixed-top">
    <div class="navbar-dotcloud">
        <div class="container" style="text-align: center;">

            <div style="float: right" class="pull-right">
                <ul class="nav">
                    <li id="nav-introduction"><a href="http://www.docker.io/">Introduction</a></li>
                    <li id="nav-gettingstarted"><a href="http://www.docker.io/gettingstarted/">Getting started</a></li>
                    <li id="nav-documentation" class="active"><a href="http://docs.docker.io/en/latest/">Documentation</a></li>
                    <li id="nav-blog"><a href="http://blog.docker.io/">Blog</a></li>
                </ul>
                <!--<div class="social links" style="float: right; margin-top: 14px; margin-left: 12px">-->
                    <!--<a class="twitter" href="http://twitter.com/getdocker">Twitter</a>-->
                    <!--<a class="github" href="https://github.com/dotcloud/docker/">GitHub</a>-->
                <!--</div>-->
            </div>

            <div style="margin-left: -12px; float: left;">
                <a href="http://www.docker.io"><img style="margin-top: 12px; height: 38px" src="../../_static/img/docker-letters-logo.gif"></a>
            </div>
        </div>


    </div>
</div>


<div class="container">
    <div class="row">
        <div class="span12 titlebar">
            <!--<span class="pull-right" style="margin-left: 20px; font-size: 20px">0.1</span>-->
            <div class="pull-right" id="fork-us" style="margin-top: 16px; margin-right: 16px;">
                <a  href="http://github.com/dotcloud/docker/"><img src="../../_static/img/fork-us.png"> Fork us on Github</a>
            </div>
            <h1 class="pageheader">DOCUMENTATION</h1>

        </div>
    </div>

</div>

<div class="container">

    <!-- Docs nav
     ================================================== -->
    <div class="row" style="position: relative">
        <div class="span3" style="height:100%;" >

        </div>

        <div class="span3 sidebar bs-docs-sidebar" style="position: absolute">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../concepts/">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../">Introduction</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation/ubuntulinux/">Ubuntu Linux</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/binaries/">Binaries</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/vagrant/">Using Vagrant (Mac, Linux)</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/windows/">Using Vagrant (Windows)</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/amazon/">Amazon EC2</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/rackspace/">Rackspace Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/archlinux/">Arch Linux</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/upgrading/">Upgrading</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/kernel/">Kernel Requirements</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../use/">Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../use/basics/">The Basics</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../use/workingwithrepository/">Working with the Repository</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../use/builder/">Docker Builder</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../use/puppet/">Using Puppet</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../running_examples/">Running the Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hello_world/">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hello_world_daemon/">Hello World Daemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_web_app/">Python Web App</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Node.js Web App</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../running_redis_service/">Redis Service</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../running_ssh_service/">SSH Daemon Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../couchdb_data_volumes/">CouchDB Service</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../commandline/">Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/cli/">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/attach/"><tt class="docutils literal"><span class="pre">attach</span></tt> &#8211; Attach to a running container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/build/"><tt class="docutils literal"><span class="pre">build</span></tt> &#8211; Build a container from a Dockerfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/commit/"><tt class="docutils literal"><span class="pre">commit</span></tt> &#8211; Create a new image from a container&#8217;s changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/diff/"><tt class="docutils literal"><span class="pre">diff</span></tt> &#8211; Inspect changes on a container&#8217;s filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/export/"><tt class="docutils literal"><span class="pre">export</span></tt> &#8211; Stream the contents of a container as a tar archive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/history/"><tt class="docutils literal"><span class="pre">history</span></tt> &#8211; Show the history of an image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/images/"><tt class="docutils literal"><span class="pre">images</span></tt> &#8211; List images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/import/"><tt class="docutils literal"><span class="pre">import</span></tt> &#8211; Create a new filesystem image from the contents of a tarball</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/info/"><tt class="docutils literal"><span class="pre">info</span></tt> &#8211; Display system-wide information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/inspect/"><tt class="docutils literal"><span class="pre">inspect</span></tt> &#8211; Return low-level information on a container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/kill/"><tt class="docutils literal"><span class="pre">kill</span></tt> &#8211; Kill a running container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/login/"><tt class="docutils literal"><span class="pre">login</span></tt> &#8211; Register or Login to the docker registry server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/logs/"><tt class="docutils literal"><span class="pre">logs</span></tt> &#8211; Fetch the logs of a container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/port/"><tt class="docutils literal"><span class="pre">port</span></tt> &#8211; Lookup the public-facing port which is NAT-ed to PRIVATE_PORT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/ps/"><tt class="docutils literal"><span class="pre">ps</span></tt> &#8211; List containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/pull/"><tt class="docutils literal"><span class="pre">pull</span></tt> &#8211; Pull an image or a repository from the docker registry server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/push/"><tt class="docutils literal"><span class="pre">push</span></tt> &#8211; Push an image or a repository to the docker registry server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/restart/"><tt class="docutils literal"><span class="pre">restart</span></tt> &#8211; Restart a running container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/rm/"><tt class="docutils literal"><span class="pre">rm</span></tt> &#8211; Remove a container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/rmi/"><tt class="docutils literal"><span class="pre">rmi</span></tt> &#8211; Remove an image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/run/"><tt class="docutils literal"><span class="pre">run</span></tt> &#8211; Run a command in a new container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/search/"><tt class="docutils literal"><span class="pre">search</span></tt> &#8211; Search for an image in the docker index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/start/"><tt class="docutils literal"><span class="pre">start</span></tt> &#8211; Start a stopped container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/stop/"><tt class="docutils literal"><span class="pre">stop</span></tt> &#8211; Stop a running container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/tag/"><tt class="docutils literal"><span class="pre">tag</span></tt> &#8211; Tag an image into a repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/version/"><tt class="docutils literal"><span class="pre">version</span></tt> &#8211; Show the docker version information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../commandline/command/wait/"><tt class="docutils literal"><span class="pre">wait</span></tt> &#8211; Block until a container stops, then print its exit code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/attach/">attach</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/build/">build</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/commit/">commit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/diff/">diff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/export/">export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/history/">history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/images/">images</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/import/">import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/info/">info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/inspect/">inspect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/kill/">kill</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/login/">login</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/logs/">logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/port/">port</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/ps/">ps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/pull/">pull</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/push/">push</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/restart/">restart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/rm/">rm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/rmi/">rmi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/run/">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/search/">search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/start/">start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/stop/">stop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/tag/">tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/version/">version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commandline/command/wait/">wait</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/contributing/">Contributing to Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/devenvironment/">Setting Up a Dev Environment</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/registry_api/">Docker Registry API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index_search_api/">Docker Index Search API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/docker_remote_api/">Docker Remote API</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a><ul class="simple">
</ul>
</li>
</ul>

        </div>

        <!-- body block -->
        <div class="span9">

            <!-- Main section
            ================================================== -->
            <section id="global" class="containerblock">
                
  <div class="section" id="node-js-web-app">
<span id="nodejs-web-app"></span><h1>Node.js Web App</h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example assumes you have Docker running in daemon mode. For more information please see <a class="reference internal" href="../running_examples/#running-examples"><em>Running the Examples</em></a></p>
</div>
<p>The goal of this example is to show you how you can build your own docker images
from a parent image using a <tt class="docutils literal"><span class="pre">Dockerfile</span></tt> . We will do that by making a simple
Node.js hello world web application running on CentOS. You can get the full
source code at <a class="reference external" href="https://github.com/gasi/docker-node-hello">https://github.com/gasi/docker-node-hello</a>.</p>
<div class="section" id="create-node-js-app">
<h2>Create Node.js app</h2>
<p>First, create a <tt class="docutils literal"><span class="pre">package.json</span></tt> file that describes your app and its
dependencies:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;docker-centos-hello&quot;</span><span class="p">,</span>
  <span class="nt">&quot;private&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Node.js Hello World app on CentOS using docker&quot;</span><span class="p">,</span>
  <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Daniel Gasienica &lt;daniel@gasienica.ch&gt;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;3.2.4&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, create an <tt class="docutils literal"><span class="pre">index.js</span></tt> file that defines a web app using the
<a class="reference external" href="http://expressjs.com/">Express.js</a> framework:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>

<span class="c1">// Constants</span>
<span class="kd">var</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">;</span>

<span class="c1">// App</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello World\n&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Running on http://localhost:&#39;</span> <span class="o">+</span> <span class="nx">PORT</span><span class="p">);</span>
</pre></div>
</div>
<p>In the next steps, we’ll look at how you can run this app inside a CentOS
container using docker. First, you’ll need to build a docker image of your app.</p>
</div>
<div class="section" id="creating-a-dockerfile">
<h2>Creating a <tt class="docutils literal"><span class="pre">Dockerfile</span></tt></h2>
<p>Create an empty file called <tt class="docutils literal"><span class="pre">Dockerfile</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre>touch Dockerfile
</pre></div>
</div>
<p>Open the <tt class="docutils literal"><span class="pre">Dockerfile</span></tt> in your favorite text editor and add the following line
that defines the version of docker the image requires to build
(this example uses docker 0.3.4):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># DOCKER-VERSION 0.3.4</span>
</pre></div>
</div>
<p>Next, define the parent image you want to use to build your own image on top of.
Here, we’ll use <a class="reference external" href="https://index.docker.io/_/centos/">CentOS</a> (tag: <tt class="docutils literal"><span class="pre">6.4</span></tt>)
available on the <a class="reference external" href="https://index.docker.io/">docker index</a>:</p>
<div class="highlight-bash"><div class="highlight"><pre>FROM    centos:6.4
</pre></div>
</div>
<p>Since we’re building a Node.js app, you’ll have to install Node.js as well as
npm on your CentOS image. Node.js is required to run your app and npm to install
your app’s dependencies defined in <tt class="docutils literal"><span class="pre">package.json</span></tt>.
To install the right package for CentOS, we’ll use the instructions from the
<a class="reference external" href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager#rhelcentosscientific-linux-6">Node.js wiki</a>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># Enable EPEL for Node.js</span>
RUN     rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
<span class="c"># Install Node.js and npm</span>
RUN     yum install -y npm-1.2.17-5.el6
</pre></div>
</div>
<p>To bundle your app’s source code inside the docker image, use the <tt class="docutils literal"><span class="pre">ADD</span></tt>
command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># Bundle app source</span>
ADD . /src
</pre></div>
</div>
<p>Install your app dependencies using npm:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># Install app dependencies</span>
RUN <span class="nb">cd</span> /src; npm install
</pre></div>
</div>
<p>Your app binds to port <tt class="docutils literal"><span class="pre">8080</span></tt> so you’ll use the <tt class="docutils literal"><span class="pre">EXPOSE</span></tt> command to have it
mapped by the docker daemon:</p>
<div class="highlight-bash"><div class="highlight"><pre>EXPOSE  8080
</pre></div>
</div>
<p>Last but not least, define the command to run your app using <tt class="docutils literal"><span class="pre">CMD</span></tt> which
defines your runtime, i.e. <tt class="docutils literal"><span class="pre">node</span></tt>, and the path to our app, i.e.
<tt class="docutils literal"><span class="pre">src/index.js</span></tt> (see the step where we added the source to the container):</p>
<div class="highlight-bash"><div class="highlight"><pre>CMD <span class="o">[</span><span class="s2">&quot;node&quot;</span>, <span class="s2">&quot;/src/index.js&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>Your <tt class="docutils literal"><span class="pre">Dockerfile</span></tt> should now look like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># DOCKER-VERSION 0.3.4</span>
FROM    centos:6.4

<span class="c"># Enable EPEL for Node.js</span>
RUN     rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
<span class="c"># Install Node.js and npm</span>
RUN     yum install -y npm-1.2.17-5.el6

<span class="c"># Bundle app source</span>
ADD . /src
<span class="c"># Install app dependencies</span>
RUN <span class="nb">cd</span> /src; npm install

EXPOSE  8080
CMD <span class="o">[</span><span class="s2">&quot;node&quot;</span>, <span class="s2">&quot;/src/index.js&quot;</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="building-your-image">
<h2>Building your image</h2>
<p>Go to the directory that has your <tt class="docutils literal"><span class="pre">Dockerfile</span></tt> and run the following command
to build a docker image. The <tt class="docutils literal"><span class="pre">-t</span></tt> flag let’s you tag your image so it’s easier
to find later using the <tt class="docutils literal"><span class="pre">docker</span> <span class="pre">images</span></tt> command:</p>
<div class="highlight-bash"><div class="highlight"><pre>docker build -t &lt;your username&gt;/centos-node-hello .
</pre></div>
</div>
<p>Your image will now be listed by docker:</p>
<div class="highlight-bash"><div class="highlight"><pre>docker images

&gt; <span class="c"># Example</span>
&gt; REPOSITORY                 TAG       ID              CREATED
&gt; centos                     6.4       539c0211cd76    8 weeks ago
&gt; gasi/centos-node-hello     latest    d64d3505b0d2    2 hours ago
</pre></div>
</div>
</div>
<div class="section" id="run-the-image">
<h2>Run the image</h2>
<p>Running your image with <tt class="docutils literal"><span class="pre">-d</span></tt> runs the container in detached mode, leaving the
container running in the background. Run the image you previously built:</p>
<div class="highlight-bash"><div class="highlight"><pre>docker run -d &lt;your username&gt;/centos-node-hello
</pre></div>
</div>
<p>Print the output of your app:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># Get container ID</span>
docker ps

<span class="c"># Print app output</span>
docker logs &lt;container id&gt;

&gt; <span class="c"># Example</span>
&gt; Running on http://localhost:8080
</pre></div>
</div>
</div>
<div class="section" id="test">
<h2>Test</h2>
<p>To test your app, get the the port of your app that docker mapped:</p>
<div class="highlight-bash"><div class="highlight"><pre>docker ps

&gt; <span class="c"># Example</span>
&gt; ID            IMAGE                          COMMAND              ...   PORTS
&gt; ecce33b30ebf  gasi/centos-node-hello:latest  node /src/index.js         49160-&gt;8080
</pre></div>
</div>
<p>In the example above, docker mapped the <tt class="docutils literal"><span class="pre">8080</span></tt> port of the container to
<tt class="docutils literal"><span class="pre">49160</span></tt>.</p>
<p>Now you can call your app using <tt class="docutils literal"><span class="pre">curl</span></tt> (install if needed via:
<tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">curl</span></tt>):</p>
<div class="highlight-bash"><div class="highlight"><pre>curl -i localhost:49160

&gt; HTTP/1.1 200 OK
&gt; X-Powered-By: Express
&gt; Content-Type: text/html; <span class="nv">charset</span><span class="o">=</span>utf-8
&gt; Content-Length: 12
&gt; Date: Sun, 02 Jun 2013 03:53:22 GMT
&gt; Connection: keep-alive
&gt;
&gt; Hello World
</pre></div>
</div>
<p>We hope this tutorial helped you get up and running with Node.js and CentOS on
docker. You can get the full source code at
<a class="reference external" href="https://github.com/gasi/docker-node-hello">https://github.com/gasi/docker-node-hello</a>.</p>
<p>Continue to <a class="reference internal" href="../running_redis_service/#running-redis-service"><em>Redis Service</em></a>.</p>
</div>
</div>


            </section>

        </div>
    </div>
</div>

<div id="footer" class="container" >
    <div class="row">

        <div class="span12 footer">
            <div class="tbox textright forceleftmargin social links pull-right">
                <a class="twitter" href="http://twitter.com/getdocker">Twitter</a>
                <a class="github" href="https://github.com/dotcloud/docker/">GitHub</a>
            </div>

            Docker is a project by <a href="http://www.dotcloud.com">dotCloud</a>


























        </div>
    </div>
</div>


  <!-- script which should be loaded after everything else -->
<script type="text/javascript">

    // Function to make the sticky header possible
    var shiftWindow = function() {
        scrollBy(0, -70);
        console.log("window shifted")
    };
    window.addEventListener("hashchange", shiftWindow);

    function loadShift() {
        if (window.location.hash) {
            console.log("window has hash");
            shiftWindow();
        }
    }

    $(window).load(function() {
        loadShift();
        console.log("late loadshift");
    });

    $(function(){

        // sidebar accordian-ing
        // don't apply on last object (it should be the FAQ)

        // define an array to which all opened items should be added
        var openmenus = [];

        var elements = $('.toctree-l2');
        for (var i = 0; i < elements.length; i += 1) { var current = $(elements[i]); current.children('ul').hide();}


        // set initial collapsed state
        var elements = $('.toctree-l1');
        for (var i = 0; i < elements.length; i += 1) {
            var current = $(elements[i]);
            if (current.hasClass('current')) {

                currentlink = current.children('a')[0].href;
                openmenus.push(currentlink);

                // do nothing
            } else {
                // collapse children
                current.children('ul').hide();
            }
        }

        // attached handler on click
        $('.sidebar > ul > li > a').not(':last').click(function(){

            var index = $.inArray(this.href, openmenus)

            if (index > -1) {
                console.log(index);
                openmenus.splice(index, 1);


                $(this).parent().children('ul').slideUp(200, function() {
                    // $(this).parent().removeClass('current'); // toggle after effect
                });
            }
            else {
                openmenus.push(this.href);
                console.log(this);

                var current = $(this);

                setTimeout(function() {
                    $('.sidebar > ul > li').removeClass('current');
                    current.parent().addClass('current'); // toggle before effect
                    current.parent().children('ul').hide();
                    current.parent().children('ul').slideDown(200);
                }, 100);
            }
            return false;
        });

    });
</script>

    <!-- Google analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-6096819-11']);
        _gaq.push(['_setDomainName', 'docker.io']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body>
</html>